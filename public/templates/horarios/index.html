<div class="container-fluid">
   <div class="row div-padding">
     
     <div  class="alert alert-{{alert}}" ng-show="msjAlert">{{message}}</div>
     <div id="mensaje" class="alert alert-error" style="display:none">Elija una Fecha</div>
   </div>
   <div class="row">
        <div class="row" >
          <label class="bold col-sm-1">FECHA</label>
          <input id="fecha"  autofocus required name="fecha" type="date" class= "col-sm-2 col-md-offset-1">
          <button id= "obtener" class="form-group col-sm-2 col-md-offset-1 btn btn-default "><i class="fa fa-plus"></i>Obtener Horario</button>
          <button id= "pdf" class="btn btn-info ">Generar PDF</button>

        </div>
     </div>
    <tr>
    <div id="contenedor" class="container" style="visibility: hidden">
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href=".lunes">Lunes</a></li>
        <li><a data-toggle="tab" href=".martes">Martes</a></li>
        <li><a data-toggle="tab" href=".miercoles">Miercoles</a></li>
        <li><a data-toggle="tab" href=".jueves">Jueves</a></li>
        <li><a data-toggle="tab" href=".viernes">Viernes</a></li>
      </ul>

      <div class="tab-content">
        <div id="lunes" class="tab-pane fade in active lunes">
          <input id="searchBarLunes" ng-model="searchText.fecha" type="text" class="form-control" placeholder="Search" aria-describedby="basic-addon1" style="visibility: hidden">
          <table id="tableLunes" ng-hide="preloader" class="table table-bordered table-hover table-striped" at-table at-paginated at-list="horariosList | filter:searchText" at-config="configTable">
            <thead></thead>
            <tbody>
              <tr>
                 <td  at-sortable at-title="BUS" width="150" >{{item.bus.ndisco}} {{item.bus.placa}} </td>
                 <td  at-sortable at-title="CONDUCTORS" width="150" > {{item.conductors.nombre}} </td>
                 <td  at-sortable at-title="RUTAS" width="150" >{{item.rutas.tipo}} {{item.rutas.nombre}} </td>           
                 <td  at-title="Acción" width="250"><button type="button" class="btn btn-default" ng-click="open(item)"><i class="fa fa-pencil-square-o"></i></button><button type="button" class="btn btn-default" ng-click="openDelete(item)"><i class="fa fa-trash-o"></i></button></td>
              </tr>
            </tbody>
          </table>
          <button ng-click="open()" class="btn btn-default "><i class="fa fa-plus"></i>Agregar</button>
          <div class="col-md-6 col-md-offset-3" ><at-pagination ng-hide="preloader" at-list="horariosList" at-config="configTable"></at-pagination></div>
          <div class="row col-lg-offset-6 col-md-offset-6 col-xs-offset-6" ng-hide="!preloader"><i class="fa fa-spinner fa-spin fa-5x position-spinner"></i></div>
        </div>
        
        <div id="martes" class="tab-pane fade martes">
          <input id="searchBarMartes" ng-model="searchText2.fecha" type="text" class="form-control" placeholder="Search" aria-describedby="basic-addon1" style="visibility: hidden">
          <table ng-hide="preloader" class="table table-bordered table-hover table-striped" at-table at-paginated at-list="horariosList | filter:searchText2" at-config="configTable">
            <thead></thead>
            <tbody>
              <tr>
                 <td  at-sortable at-title="BUS" width="150" >{{item.bus.ndisco}} {{item.bus.marca}} {{item.bus.placa}} {{item.bus.modelo}} {{item.bus.csentados}} {{item.bus.cparados}} </td>
                 <td  at-sortable at-title="CONDUCTORS" width="150" >{{item.conductors.tipo}} {{item.conductors.nombre}} </td>
                 <td  at-sortable at-title="RUTAS" width="150" >{{item.rutas.tipo}} {{item.rutas.nombre}} </td>           
                 <td  at-title="Acción" width="250"><button type="button" class="btn btn-default" ng-click="open(item)"><i class="fa fa-pencil-square-o"></i></button><button type="button" class="btn btn-default" ng-click="openDelete(item)"><i class="fa fa-trash-o"></i></button></td>

              </tr>
            </tbody>
          </table>
          <button ng-click="open()" class="btn btn-default "><i class="fa fa-plus"></i>Agregar</button>
          <div class="col-md-6 col-md-offset-3" ><at-pagination ng-hide="preloader" at-list="horariosList" at-config="configTable"></at-pagination></div>
          <div class="row col-lg-offset-6 col-md-offset-6 col-xs-offset-6" ng-hide="!preloader"><i class="fa fa-spinner fa-spin fa-5x position-spinner"></i></div>
        </div>
        
        <div id="miercoles" class="tab-pane fade miercoles">
         <input id="searchBarMiercoles" ng-model="searchText3.fecha" type="text" class="form-control" placeholder="Search" aria-describedby="basic-addon1" style="visibility: hidden">
          <table ng-hide="preloader" class="table table-bordered table-hover table-striped" at-table at-paginated at-list="horariosList | filter:searchText3" at-config="configTable">
            <thead></thead>
            <tbody>
              <tr>
                   <td  at-sortable at-title="BUS" width="150" >{{item.bus.ndisco}} {{item.bus.marca}} {{item.bus.placa}} {{item.bus.modelo}} {{item.bus.csentados}} {{item.bus.cparados}} </td>
                   <td  at-sortable at-title="CONDUCTORS" width="150" >{{item.conductors.tipo}} {{item.conductors.nombre}} </td>
                   <td  at-sortable at-title="RUTAS" width="150" >{{item.rutas.tipo}} {{item.rutas.nombre}} </td>
                 <td  at-title="Acción" width="250"><button type="button" class="btn btn-default" ng-click="open(item)"><i class="fa fa-pencil-square-o"></i></button><button type="button" class="btn btn-default" ng-click="openDelete(item)"><i class="fa fa-trash-o"></i></button></td>

              </tr>
            </tbody>
          </table>
          <button ng-click="open()" class="btn btn-default "><i class="fa fa-plus"></i>Agregar</button>
           <div class="col-md-6 col-md-offset-3" ><at-pagination ng-hide="preloader" at-list="horariosList" at-config="configTable"></at-pagination></div>
          <div class="row col-lg-offset-6 col-md-offset-6 col-xs-offset-6" ng-hide="!preloader"><i class="fa fa-spinner fa-spin fa-5x position-spinner"></i></div>
        </div>
       
        <div id="jueves" class="tab-pane fade jueves">
         <input id="searchBarJueves" ng-model="searchText4.fecha" type="text" class="form-control" placeholder="Search" aria-describedby="basic-addon1" style="visibility: hidden">
          <table ng-hide="preloader" class="table table-bordered table-hover table-striped" at-table at-paginated at-list="horariosList | filter:searchText4" at-config="configTable">
            <thead></thead>
            <tbody>
              <tr>
                 <td  at-sortable at-title="BUS" width="150" >{{item.bus.ndisco}} {{item.bus.marca}} {{item.bus.placa}} {{item.bus.modelo}} {{item.bus.csentados}} {{item.bus.cparados}} </td>
                 <td  at-sortable at-title="CONDUCTORS" width="150" >{{item.conductors.tipo}} {{item.conductors.nombre}} </td>
                 <td  at-sortable at-title="RUTAS" width="150" >{{item.rutas.tipo}} {{item.rutas.nombre}} </td>           
                 <td  at-title="Acción" width="250"><button type="button" class="btn btn-default" ng-click="open(item)"><i class="fa fa-pencil-square-o"></i></button><button type="button" class="btn btn-default" ng-click="openDelete(item)"><i class="fa fa-trash-o"></i></button></td>

              </tr>
            </tbody>
          </table>
          <button ng-click="open()" class="btn btn-default "><i class="fa fa-plus"></i>Agregar</button>
           <div class="col-md-6 col-md-offset-3" ><at-pagination ng-hide="preloader" at-list="horariosList" at-config="configTable"></at-pagination></div>
          <div class="row col-lg-offset-6 col-md-offset-6 col-xs-offset-6" ng-hide="!preloader"><i class="fa fa-spinner fa-spin fa-5x position-spinner"></i></div>
        </div>
        
        <div id="viernes" class="tab-pane fade viernes">
         <input id="searchBarViernes" ng-model="searchText5.fecha" type="text" class="form-control" placeholder="Search" aria-describedby="basic-addon1" style="visibility: hidden">
          <table ng-hide="preloader" class="table table-bordered table-hover table-striped" at-table at-paginated at-list="horariosList | filter:searchText5" at-config="configTable">
            <thead></thead>
            <tbody>
              <tr>
                 <td  at-sortable at-title="BUS" width="150" >{{item.bus.ndisco}} {{item.bus.marca}} {{item.bus.placa}} {{item.bus.modelo}} {{item.bus.csentados}} {{item.bus.cparados}} </td>
                 <td  at-sortable at-title="CONDUCTORS" width="150" >{{item.conductors.tipo}} {{item.conductors.nombre}} </td>
                 <td  at-sortable at-title="RUTAS" width="150" >{{item.rutas.tipo}} {{item.rutas.nombre}} </td>           
                 <td  at-title="Acción" width="250"><button type="button" class="btn btn-default" ng-click="open(item)"><i class="fa fa-pencil-square-o"></i></button><button type="button" class="btn btn-default" ng-click="openDelete(item)"><i class="fa fa-trash-o"></i></button></td>

              </tr>
            </tbody>
          </table>
          <button ng-click="open()" class="btn btn-default "><i class="fa fa-plus"></i>Agregar</button>
           <div class="col-md-6 col-md-offset-3" ><at-pagination ng-hide="preloader" at-list="horariosList" at-config="configTable"></at-pagination></div>
          <div class="row col-lg-offset-6 col-md-offset-6 col-xs-offset-6" ng-hide="!preloader"><i class="fa fa-spinner fa-spin fa-5x position-spinner"></i></div>
        </div>
      </div>
    </div>

</div>

<div class="modal fade" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Vista Previa</h4>
      </div>
      <div class="modal-body">
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Descargar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
 <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
  $( "#obtener" ).click(function() {
    var fecha= $("#fecha").val();
    if (fecha!=""){
      $("#mensaje").css("display","none");
      $("#contenedor").css("visibility","visible");
      var nuevo = new Date(fecha.split("-"))
      $("#searchBarLunes").val(cambio(nuevo)).change();
      var martes=new Date(nuevo.getTime() + 24*60*60*1000);
      $("#searchBarMartes").val(cambio(martes)).change();
      var miercoles=new Date(martes.getTime() + 24*60*60*1000);
      $("#searchBarMiercoles").val(cambio(miercoles)).change();
      var jueves=new Date(miercoles.getTime() + 24*60*60*1000);
      $("#searchBarJueves").val(cambio(jueves)).change();
      var viernes=new Date(jueves.getTime() + 24*60*60*1000);
      $("#searchBarViernes").val(cambio(viernes)).change();
    }else{
      $("#mensaje").css("display","block");
    }
  });

  $( "#pdf" ).click(function(){
      $("#myModal").modal("show");
      $("#txtfname").val($(this).closest('tr').children()[0].textContent);
      $("#txtlname").val($(this).closest('tr').children()[1].textContent);
      /*var doc = new PDFDocument();
      var stream = doc.pipe(blobStream());

      // draw some text
      doc.fontSize(25)
         .text('Here is some vector graphics...', 100, 80);
         
      // some vector graphics
      doc.save()
         .moveTo(100, 150)
         .lineTo(100, 250)
         .lineTo(200, 250)
         .fill("#FF3300");
         
      doc.circle(280, 200, 50)
         .fill("#6600FF");
         
      // an SVG path
      doc.scale(0.6)
         .translate(470, 130)
         .path('M 250,75 L 323,301 131,161 369,161 177,301 z')
         .fill('red', 'even-odd')
         .restore();
         
      // and some justified text wrapped into columns
      doc.text('And here is some wrapped text...', 100, 300)
         .font('Times-Roman', 13)
         .moveDown()
         .text(lorem, {
           width: 412,
           align: 'justify',
           indent: 30,
           columns: 2,
           height: 300,
           ellipsis: true
         });
         
      // end and display the document in the iframe to the right
      doc.end();
      stream.on('finish', function() {
        iframe.src = stream.toBlobURL('application/pdf');
      });*/
  });


  function cambio(dateObj) {
    var d = new Date(dateObj);
    var day = d.getDate();
    var month = d.getMonth() + 1;
    var year = d.getFullYear();

    if (month < 10) {
        month = "0" + month;
    }
    if (day<10){
      return year + "-" + month + "-0" + day;
    }else{
      return year + "-" + month + "-" + day;
    }
  };
  
  

</script>